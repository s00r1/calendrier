# جدول تنظيف المطبخ

هذا التطبيق الويب يدير توزيع مهام التنظيف في المطبخ. يعمل كليًا على جانب العميل: افتح ببساطة الملف `index.html` في متصفح حديث لتوليد وطباعة تقويم مخصص.

## الميزات الرئيسية

- إنشاء تقويم شهري ديناميكي
- إسناد الغرف يدويًا أو تلقائيًا (من **1** إلى **54** ما عدا الغرفة **13**)
- وضع الإدارة محمي بكلمة مرور لتعديل الجدول
- استثناء غرف معينة وبداية الإسناد من تاريخ محدد
- مسح سريع للتقويم ووضع داكن لراحة الرؤية
- الطباعة مباشرة من المتصفح
- يتم إخفاء عناصر واجهة الإدارة تلقائيًا عند الطباعة
- واجهة ثنائية اللغة بالفرنسية والعربية مع زر للتبديل AR/FR
- حفظ التوزيعات عبر خدمة Supabase
- إمكانية إضافة أكثر من غرفة في اليوم نفسه وربط الغرف ليتم إسنادها معًا

## التثبيت

لا يلزم أي تثبيت خاص. قم باستنساخ المستودع ثم افتح ملف `index.html` بمتصفحك المفضل. يمكنك أيضًا تشغيل مجلد المشروع عبر خادم HTTP صغير إذا كنت ترغب في الوصول إليه من أجهزة أخرى:

```bash
npx serve .
# أو
npm start
```

الأمر `npm start` يشغّل تلقائيًا `npx serve .` لخدمة التطبيق محليًا.

### الإعداد

انسخ الملف `.env.example` إلى `.env` ثم عيّن القيم `SUPABASE_URL` و`SUPABASE_KEY` و`ADMIN_PASS`.

للاحتفاظ بالتوزيعات على الإنترنت باستخدام Supabase:

1. سجّل الدخول إلى [Supabase](https://app.supabase.com) وأنشئ مشروعًا جديدًا (مثلاً **menage**).
2. من خلال **Table Editor** أنشئ جدولًا باسم `assignments` يحتوي على الأعمدة `id` (ترقيم تلقائي ومفتاح أساسي)، `due_date` (تاريخ وفريد) و`title` (نص). يجب أن يكون العمود `due_date` فريدًا ليسمح باستخدام أمر `upsert`.
3. فعّل خاصية *Row Level Security* وأضف قاعدة تسمح للدور `anon` بالقراءة والكتابة على الجدول (استخدم الشرط `true` للاختبار).
4. من قسم **Settings > API** انسخ عنوان URL والمفتاح `anon` الخاصين بمشروعك.
5. ضع هاتين القيمتين في ملف `supabase-config.js` ضمن الثوابت `SUPABASE_URL` و`SUPABASE_KEY`.

**ملاحظة:** هذه المفاتيح مؤقتة للاختبارات وسيتم استبدالها لاحقًا بطريقة أكثر أمانًا.

## الاستخدام السريع

1. اختر الشهر والسنة المطلوبين، وسيتم تحديث التقويم فورًا.
2. فعّل **وضع الإدارة** عبر زر *Admin* وأدخل كلمة المرور المحددة في ملف `.env` تحت المفتاح `ADMIN_PASS`.
3. أدخل أرقام الغرف لكل تاريخ أو استخدم الإسناد التلقائي. استخدم زر **+** لإضافة أكثر من غرفة إذا لزم الأمر.
4. اضغط على **طباعة** للحصول على نسخة ورقية من الجدول.
5. يمكنك التبديل بين اللغتين عبر زر **AR/FR** أعلى الصفحة،
   ويتم حفظ التعديلات تلقائيًا في Supabase عند ضبط الإعدادات.

### التوزيع الآلي

في قسم الإدارة، حدّد **غرفة البداية** و **تاريخ البدء**. اضغط على زر **Auto** لملء التقويم مع مراعاة الغرف المستثناة إن وجدت.

### استثناء الغرف

أدخل الأرقام المطلوب تجاهلها في خانة الاستثناء ثم أكد لإزالتها من التخطيط التلقائي.

#### حالة خاصة

إذا كانت قائمة الاستثناء تضم جميع الغرف (54 رقمًا) فسيظهر زر **Auto** رسالة خطأ ولن يتم إسناد أي غرفة.
### ربط الغرف

استخدم الحقلين في قسم الإدارة لتحديد رقمَي غرف يجب إسنادهما معًا دائمًا. يمكن إزالة الربط عبر الزر الصغير بجوارهما. تظهر هذه الأزواج في قوائم الاختيار بالشكل «a/b» مع بقاء القيمة هي الرقم الأول.


### تنظيف التقويم

زر **Clear** يمسح جميع القيم المدخلة بسرعة لبدء جدول فارغ.

### اختبار الحفظ

بعد تعبئة الجدول يدويًا أو عبر زر **Auto**، قم بتحديث الصفحة. ينبغي أن تظهر القيم نفسها من جديد مما يؤكد حفظها في Supabase. إذا لم يحدث ذلك، تحقق من إعدادات Supabase.

### الوضع الداكن

فعّل زر **Thème** للتبديل بين العرض الفاتح والداكن حسب تفضيلاتك.

## المساهمة

المساهمات مرحب بها! لا تتردد في فتح قضايا أو طلبات دمج لاقتراح تحسينات.

## الرخصة

هذا المشروع موزع تحت رخصة [MIT](LICENSE). يوجد ملف الرخصة والترجمة العربية لهذه الوثيقة في [LICENSE_AR.md](LICENSE_AR.md).
